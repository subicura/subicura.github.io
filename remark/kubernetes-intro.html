<!DOCTYPE html>
<html>
  <head>
    <title>An Introduction to Kubernetes</title>
    <meta charset="utf-8">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@subicura" />
    <meta name="twitter:title" content="An Introduction to Kubernetes" />
    <meta name="twitter:image" content="https://subicura.com/assets/images/df_logo.png" />
    <meta name="twitter:description"  content="ì¿ ë²„ë„¤í‹°ìŠ¤ ì‚´í´ë³´ê¸°" />
  
    <meta property="og:site_name" content="Subicura's Blog" />
    <meta property="og:title" content="An Introduction to Kubernetes"/>
    <meta property="og:description" content="ì¿ ë²„ë„¤í‹°ìŠ¤ ì‚´í´ë³´ê¸°" />
    
    <meta property="og:image" content="https://subicura.com/assets/images/df_logo.png" />
    <meta property="og:url" content="https://subicura.com/remark/index.html" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2018-01-25T00:00:00+09:00">

    <link href="./fonts/notosanskr.css" rel="stylesheet" type="text/css" />
    <link href="./fonts/yanone-kaff.css" rel="stylesheet" type="text/css" />
    <link href="./fonts/ubuntu-mono.css" rel="stylesheet" type="text/css" />
    <link href="./fonts/lato.css" rel="stylesheet" type="text/css" />
    <link href="./fonts/nerd-fonts-generated.css" rel="stylesheet" type="text/css" />
    <link href="./css/style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <textarea id="source">
name: default
ch: &nbsp;
layout: true

.ch[{{ch}}]

---
layout: false
class: inverse

# An Introduction to Kubernetes
### ì¿ ë²„ë„¤í‹°ìŠ¤ ì‚´í´ë³´ê¸°

.left-bottom.list-unstyled[
- 2018/01/22 at microservices x kubernetes study
]

.logo-wrapper.right.right-bottom.list-unstyled[
- Kim Chungsub
- Creative Lab Director
- <i class="nf nf-fa-twitter" aria-hidden="true"></i> <i class="nf nf-fa-github" aria-hidden="true"></i> subicura
- <i class="nf nf-oct-mail" aria-hidden="true"></i> subicura@subicura.com
- ![purpleworks](./imgs/logo.png)
]

---
layout: true
class: center, middle
---

# what is kubernetes?

.footnote[.text[**ì¿ ë²„ë„¤í‹°ìŠ¤**ë€ ë¬´ì—‡ì¼ê¹Œìš”?]]

---

ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì¸ê¸° > íŠ¹ì§• > ì•„í‚¤í…ì²˜ > êµ¬ì„± ì˜¤ë¸Œì íŠ¸ > ë‹¨ì  > ê°œë°œí•˜ê¸°

.footnote[.text[ì¼ë‹¨ ì–¼ë§ˆë‚˜ ì¸ê¸°ìˆëŠ” í”Œë«í¼ì¸ì§€ ì•Œì•„ë³´ê³  í•™ìŠµí•˜ëŠ” ë°©ë²•ê¹Œì§€ ì•Œì•„ë´…ì‹œë‹¤]]

---

![docker](./imgs/kubernetes-intro/docker.png)

.footnote[.text[2013ë…„ 3ì›” **ë„ì»¤**ê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤]]

---

![docker](./imgs/kubernetes-intro/docker-container.png)

.footnote[.text[ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ë„ì»¤ëŠ” ì„œë²„ ê´€ë¦¬ ë°©ì‹ì„ **ì™„ì „íˆ** ë°”ê¾¸ê³  ìˆìŠµë‹ˆë‹¤]]

---

# Docker - Build, Ship, and Run Any App, Anywhere

.footnote[.text[docker.comì˜ **íƒ€ì´í‹€** ì…ë‹ˆë‹¤]]

---

# Build

.footnote[.text[ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê³ ]]

---

# Ship

.footnote[.text[ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì €ì¥í•˜ê³ ]]

---

# Run

.footnote[.text[ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤]]

---

# Deployment?

.footnote[.text[ê·¸ëŸ¼, ë°°í¬ëŠ”??]]

---

```sh
$ DOCKER_HOST=production.host.ip docker run -d -p 80:80 awesome-app
```

.footnote[.text[&amp;lt;production.host.ip&amp;gt;ì— ë„ì»¤ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤]]

---

ë§¤ë²ˆ `docker` ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ëŠ” ê²ƒì„ ìë™í™” í•´ë³¼ê¹Œ?

---

# [newrelic/centurion](https://github.com/newrelic/centurion)

A deployment tool for Docker

.footnote[.text[NewRelicì—ì„œ ë§Œë“  rubyê¸°ë°˜ì˜ ë„ì»¤ ì»¨í…Œì´ë„ˆ ë°°í¬íˆ´ì…ë‹ˆë‹¤]]

---

.left[
  ```ruby
  namespace :environment do
    task :common do
      set :image, 'example.com/newrelic/radio-radio'
      host 'docker-server-1.example.com'
      host 'docker-server-2.example.com'
    end

    desc 'Staging environment'
    task :staging => :common do
      set_current_environment(:staging)
      env_vars YOUR_ENV: 'staging'
      env_vars MY_DB: 'radio-db.example.com'
      host_port 10234, container_port: 9292
      host_volume '/mnt/volume1', container_volume: '/mnt/volume2'
    end

    desc 'Production environment'
    task :production => :common do
      set_current_environment(:production)
      env_vars YOUR_ENV: 'production'
      env_vars MY_DB: 'radio-db-prod.example.com'
      host_port 22234, container_port: 9292
      command ['/bin/bash', '-c', '/path/to/server -e production']
    end
  end
  ```
]

.footnote[.text[ëŒ€ëµ ì„¤ì •ì€ ì´ë ‡ê²Œ ìƒê²¼ìŠµë‹ˆë‹¤. ì°¸..ì‰½ì£ ?]]

---

<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="100" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="100" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="100" />

.footnote[.text[ì„œë²„ 2-3ëŒ€ê¹Œì§€ëŠ” ì´ëŸ¬í•œ ë°©ì‹ ~~í•œë•€í•œë•€~~ ë„ ê´œì°®ìŠµë‹ˆë‹¤]]

---

<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />

<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />

<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />

<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />

<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />
<img src="./imgs/kubernetes-intro/docker-container-icon.svg" width="60" />

.footnote[.text[ğŸ˜±]]

---

# orchestration

.footnote[.text[ë³µì¡í•œ ì„œë²„ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ íˆ´ì„ ë„ì…í•´ ë´…ë‹ˆë‹¤]]

---

![deis](./imgs/kubernetes-intro/deis.png)

.footnote[.text[**Deis v1** the CoreOS and Docker PaaS]]

---

![rancher](./imgs/kubernetes-intro/rancher-logo.jpg)

.footnote[.text[**Rancher** container management platform]]

---

![mesos-marathon](./imgs/kubernetes-intro/mesos-marathon.png)

.footnote[.text[**Mesos** Deployment Made Easy]]

---

![nomad](./imgs/kubernetes-intro/nomad.svg)

.footnote[.text[**Nomad** a tool for managing a cluster of machines and running applications on them]]

---

![docker swarm](./imgs/kubernetes-intro/docker-swarm.jpg)

.footnote[.text[**Swarm** a Docker-native clustering system]]

---

# ì»¨í…Œì´ë„ˆ ê´€ë¦¬ë„êµ¬ ì¶˜ì¶”ì „êµ­ì‹œëŒ€

.footnote[.text[ì €ë§ˆë‹¤ì˜ ì¥ì ì„ ê°€ì§„ ë‹¤ì–‘í•œ ë„êµ¬ë“¤ì´ ë“±ì¥í–ˆìŠµë‹ˆë‹¤]]

---

# But, De facto

.footnote[.text[í•˜ì§€ë§Œ, ì‚¬ì‹¤ìƒì˜ í‘œì¤€]]

---

![kubernetes](./imgs/kubernetes-intro/kubernetes-logo.svg)

.footnote[.text[**Kubernetes** Production-Grade Container Orchestration]]

---

# why kubernetes?

---

<img src="./imgs/kubernetes-intro/google-logo.png" width="60%">

.footnote[.text[ê°“-êµ¬ê¸€]]

---

1ì£¼ì¼ì— 20ì–µê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ëŠ” googleì´<br />
ì»¨í…Œì´ë„ˆ ë°°í¬ ì‹œìŠ¤í…œìœ¼ë¡œ ì‚¬ìš©í•˜ë˜ [borg](http://blog.kubernetes.io/2015/04/borg-predecessor-to-kubernetes.html)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  ì˜¤í”ˆì†ŒìŠ¤

---

![gogo](./imgs/kubernetes-intro/gazua.png)

.footnote[.text[ì´ë¯¸ ëŒ€ì„¸ëŠ” kubernetesë¡œ]]

---

# Kubernetes Native Platform

<p>Deis Workflow</p>
<p>Rancher 2.0</p>
<p>OpenShift (by redhat)</p>
<p>Tectonic (by CoreOS)</p>
<p>Docker EnterpriseEdition</p>

.footnote[.text[kubernetesë¥¼ ê¸°ë°˜ìœ¼ë¡œí•œ í”Œë«í¼ì˜ ë“±ì¥]]

---

![deis architecture](./imgs/kubernetes-intro/deis-arch.png)

.footnote[.text[deisëŠ” ê¸°ì¡´ ì•„í‚¤í…ì²˜ë¥¼ ë²„ë¦¬ê³  kubernetesìœ„ì— Workflowë¼ëŠ” í”Œë«í¼ ê°œë°œ]]

---

![rancher cattle](./imgs/kubernetes-intro/rancher-2.0.png)

.footnote[.text[Rancherë„ í˜ë“¤ê²Œ ë§Œë“  cattleì„ ë²„ë¦¬ê³ (?) kubernetes ê¸°ë°˜ìœ¼ë¡œ =_=/]]

---

![rancher cattle](./imgs/kubernetes-intro/docker-kube.jpeg)

.footnote[.text[ë„ì»¤ë„ ~~ì–´ì©”ìˆ˜ì—†ì´~~ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì§€ì›í•©ë‹ˆë‹¤..! (ã…‚ã„·ã…‚ã„·)]]

---

# Cloud Native Support

<p><b>AWS</b> EKS / Amazon Elastic Container Service for Kubernetes</p>
<p><b>Google Cloud</b> GKE / Google Kubernetes Engine</p>
<p><b>Azure</b> Container Service</p>

---

![aws](./imgs/kubernetes-intro/reinvent2017-eks.jpg)

.footnote[.text[ë“œë””ì–´ AWSì—ì„œë„ ì§€ì›í•©ë‹ˆë‹¤ ~~EKS ë² íƒ€ì‹ ì²­í–ˆëŠ”ë° ì™œ ë‹µì¥ì´ ì—†ì£ ?~~]]

---

# Kubernetes is..

.footnote[.text[ì¿ ë²„ë„¤í‹°ìŠ¤ë€ ë­˜ê¹Œìš”]]

---

## Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.

.footnote[.text[ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë°°í¬, í™•ì¥ ë° ê´€ë¦¬ë¥¼ ìë™í™”í•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ì‹œìŠ¤í…œì…ë‹ˆë‹¤]]

---

## The name Kubernetes originates from Greek, meaning helmsman or pilot.

.footnote[.text[ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ê·¸ë¦¬ìŠ¤ì–´ë¡œ ì¡°íƒ€ìˆ˜ ë˜ëŠ” ì¡°ì¢…ì‚¬ì—ì„œ ë”°ì™”ìŠµë‹ˆë‹¤]]

---

## K8s is an abbreviation derived by replacing the 8 letters â€œuberneteâ€ with â€œ8â€.

.footnote[.text[ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì¤„ì—¬ì„œ K8së¼ê³ ë„ í•©ë‹ˆë‹¤]]

---

## Google is donating it to a newly formed foundation â€” the Cloud Native Computing Foundation (CNCF) that will be run by the Linux Foundation

.footnote[.text[Googleì—ì„œ ë§Œë“¤ì–´ì„œ Cloud Native Computing Foundation(CNCF) ì¬ë‹¨ì— ê¸°ë¶€í–ˆìŠµë‹ˆë‹¤]]

---

# íŠ¹ì§•

---
template: default
layout: true
class: default-layout

ch: Kubernetes íŠ¹ì§•

---

## ê¸°ë³¸ ê¸°ëŠ¥

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” í”„ë¡œë•ì…˜ ìˆ˜ì¤€ì˜ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ìœ¼ë¡œ ê¸°ë³¸ê¸°ëŠ¥ì„ ì¶©ì‹¤í•˜ê²Œ ì œê³µí•©ë‹ˆë‹¤.

- **ìƒíƒœê´€ë¦¬** ìƒíƒœë¥¼ ì„ ì–¸í•˜ê³  ì„ ì–¸í•œ ìƒíƒœë¥¼ ìœ ì§€ / ë…¸ë“œê°€ ì£½ê±°ë‚˜ ì»¨í…Œì´ë„ˆ ì‘ë‹µì´ ì—†ì„ ê²½ìš° ìë™ìœ¼ë¡œ ë³µêµ¬
- **ìŠ¤ì¼€ì¤„ë§** í´ëŸ¬ìŠ¤í„°ì˜ ì—¬ëŸ¬ ë…¸ë“œ ì¤‘ ì¡°ê±´ì— ë§ëŠ” ë…¸ë“œë¥¼ ì°¾ì•„ ì»¨í…Œì´ë„ˆë¥¼ ë°°ì¹˜
- **í´ëŸ¬ìŠ¤í„°** ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ í•˜ë‚˜ì˜ ì„œë²„ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ í†µì‹ 
- **ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬** ì„œë¡œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ì‰½ê²Œ ì°¾ê³  í†µì‹ í•  ìˆ˜ ìˆìŒ
- **ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§** cAdvisorë¥¼ í†µí•œ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§
- **ìŠ¤ì¼€ì¼ë§** ë¦¬ì†ŒìŠ¤ì— ë”°ë¼ ìë™ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì¡°ì •í•¨
- **RollOut/RollBack** ë°°í¬/ë¡¤ë°± ë° ë²„ì „ ê´€ë¦¬

---

## ë¹ ë¥¸ ì—…ë°ì´íŠ¸

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” í˜„ì¬ ê°€ì¥ ë¹ ë¥´ê²Œ ë°œì „í•˜ê³  ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ì…ë‹ˆë‹¤.

- **v1.9** 2017/11/9
- **v1.8** 2017/8/25
- **v1.7** 2017/6/14
- **v1.6** 2017/3/23

ìµœê·¼ ì—…ë°ì´íŠ¸ëŠ” ë‹¤í–‰íˆ(?) ê¸°ëŠ¥ì˜ ì¶”ê°€ë³´ë‹¤ëŠ” ì•ˆì •í™”ì— ì´ˆì ì´ ë§ì¶°ì ¸ ìˆê³  ì¤‘ì•™í™” ëœ ì†ŒìŠ¤ë¥¼ ì¢€ë” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” ì‘ì—…ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

- 1.9 ìƒˆê¸°ëŠ¥
  - ìœˆë„ìš° ì„œë²„ ì§€ì›
  - ì»¨í…Œì´ë„ˆ ìŠ¤í† ë¦¬ì§€ ì¸í„°í˜ì´ìŠ¤ ì§€ì›
  - GPU ìì› í™œìš©

---

## ë‹¤ì–‘í•œ ì§€ì›

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë‹¤ì–‘í•œ í™˜ê²½ì„ ì§€ì›í•©ë‹ˆë‹¤.

- **Cluster Networking** ACI, Cilium, Contiv, Contrail, Flannel, Google Compute Engine (GCE), Kube-router, L2 networks and linux bridging, Multus (a Multi Network plugin), NSX-T, Nuage Networks VCS (Virtualized Cloud Services), OpenVSwitch, OVN (Open Virtual Networking), Project Calico, Romana, Weave Net from Weaveworks, CNI-Genie from Huawei
- **Volume Type** awsElasticBlockStore, azureDisk, azureFile, cephfs, configMap, csi, downwardAPI, emptyDir, fc (fibre channel), flocker, gcePersistentDisk, gitRepo, glusterfs, hostPath, iscsi, local, nfs, persistentVolumeClaim, projected, portworxVolume, quobyte, rbd, scaleIO, secret, storageos, vsphereVolume
- **Ingress Service** ingress-nginx, ingress-gce

ë­”ê°€.. ë§ì´ ì§€ì›í•˜ë©°, ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì‰½ê²Œ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•  ìˆ˜ ìˆì–´ ì—¬ëŸ¬ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì— ì ì ˆí•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆê³  ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë°˜ì˜ í”Œë«í¼ì´ ë‚˜ì˜¤ê¸° ì‰¬ìš´ êµ¬ì¡°

---
layout: true
class: center, middle
---

# Architecture

---
template: default
layout: true
class: default-layout

ch: Kubernetes Architecture

---

# Master-Node

.center[![kubernetes architecture from wikipedia](./imgs/kubernetes-intro/kubernetes-architecture.png)]
.center[from wikipedia]

---

# Master

ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
ìµœì†Œ 1ëŒ€ ì´ìƒ êµ¬ì¶•í•˜ë©° ë³´í†µ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ê³ ê°€ìš©ì„±ì„ ìœ„í•´ 3ëŒ€ ì´ìƒ ìš´ì˜í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë§ˆìŠ¤í„° ë…¸ë“œì—ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ì§€ ì•Šì§€ë§Œ ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ ì˜ˆì™¸ì…ë‹ˆë‹¤.

- **API Server** ìš´ì˜ì ë° ë‚´ë¶€ ë…¸ë“œì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ / HTTP(S) RestAPIë¡œ ë…¸ì¶œë˜ì–´ ìˆê³  ëª¨ë“  ëª…ë ¹ì€ ì—¬ê¸°ë¥¼ í†µí•¨
- **Controller Manager** ë‹¤ì–‘í•œ ì»¨íŠ¸ë¡¤ëŸ¬ (ë³µì œ/ë°°í¬/ìƒíƒœ/í¬ë¡ /..)ë¥¼ ê´€ë¦¬í•˜ê³  API Serverì™€ í†µì‹ í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í–‰
- **etcd** ê°€ë³ê³  ë¹ ë¥¸ ë¶„ì‚°í˜• key-value ì €ì¥ì†Œ / ì„¤ì • ë° ìƒíƒœë¥¼ ì €ì¥
- **Scheduler** ì„œë¹„ìŠ¤ë¥¼ ë¦¬ì†ŒìŠ¤ ìƒí™©ì— ë§ê²Œ ì ì ˆí•œ ë…¸ë“œì— ë°°ì¹˜í•˜ëŠ” ì—­í•  / predicatesì™€ priorities (LeastRequestedPriority, BalancedResourceAllocation, ServiceSpreadingPriority, EqualPriority) ì„¤ì •

---

# Node

ì‹¤ì œ ì„œë¹„ìŠ¤(ì»¨í…Œì´ë„ˆ)ê°€ ì‹¤í–‰ë˜ëŠ” ì„œë²„ì…ë‹ˆë‹¤. ë§ˆìŠ¤í„°ì˜ API Serverì™€ í†µì‹ í•˜ë©° ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

- **kubelet** ì„œë¹„ìŠ¤(ì»¨í…Œì´ë„ˆ)ë¥¼ ì‹¤í–‰/ì¤‘ì§€í•˜ê³  ìƒíƒœë¥¼ ì²´í¬í•˜ì—¬ ê³„ì†í•´ì„œ ì‚´ì•„ìˆëŠ” ìƒíƒœë¡œ ê´€ë¦¬
- **Proxy** ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œì™€ ë¡œë“œ ë°œë€ì„œ ì—­í•  (creates a iptable rule/...)
- **cAdvisor** ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ (kubelet binaryì— í¡ìˆ˜)
- **Docker(rkt ë˜ëŠ” Hyper)** ë„ì»¤ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆ ì—”ì§„ì„ ì§€ì›

---

ReplicaSet ì˜¤ë¸Œì íŠ¸ ìƒì„± íë¦„

.center[![sequence of events ReplicaSet](./imgs/kubernetes-intro/kubernetes-flow.png)]

ëª¨ë“  ëª…ë ¹ì€ API Serverë¥¼ í†µí•´ì„œ..

---
layout: true
class: center, middle
---

# Kubernetes Object

---
template: default
layout: true
class: default-layout

ch: Kubernetes Object

---

<br />
.center[<iframe width="560" height="315" src="https://www.youtube.com/embed/4ht22ReBjno" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>]
<br />
.center[.text[[The Illustrated Children's Guide to Kubernetes](https://www.youtube.com/watch?v=4ht22ReBjno)]]

.footnote[.text[8ë¶„ë™ì•ˆ ì¿ ë²„ë„¤í‹°ìŠ¤ ê°œë…ì„ **ì‰½ê²Œ** ì†Œê°œí•©ë‹ˆë‹¤]]

---

<br />
.center[![container](./imgs/kubernetes-intro/kubernetes-illustrated-guide-diagram-3.png)]

.footnote[.text[ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆë¥¼]]

---

<br />
.center[![container](./imgs/kubernetes-intro/kubernetes-illustrated-guide-diagram-6.png)]

.footnote[.text[íŒŸì´ë¼ëŠ” ìµœì†Œ ê°œë…ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤]]

---

<br />
.center[![container](./imgs/kubernetes-intro/kubernetes-illustrated-guide-diagram-7.png)]

.footnote[.text[íŒŸì„ í™•ì¥í•  ë• ë³µì œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.]]

---

<br /><br /><br /><br /><br /><br /><br /><br /><br />
.center[.text[`container` - `pod` - `controller`]]

.footnote[.text[íŒŸì€ ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•˜ê³  ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” íŒŸì„ ê´€ë¦¬í•©ë‹ˆë‹¤]]

---

<br />
.center[![container](./imgs/kubernetes-intro/kubernetes-illustrated-guide-diagram-8.png)]

.footnote[.text[íŒŸì€ ìì²´ IPê°€ ìˆì§€ë§Œ ì§ì ‘ IPë¡œ í†µì‹ í•˜ì§€ ì•Šê³  ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  ì„œë¹„ìŠ¤ë¥¼ í†µí•´ í†µì‹ í•©ë‹ˆë‹¤]]

---

<br />
.center[![container](./imgs/kubernetes-intro/kubernetes-illustrated-guide-diagram-9.png)]

.footnote[.text[ì €ì¥ì†Œê°€ í•„ìš”í•˜ë©´ ë³¼ë¥¨ì„ ë§Œë“¤ì–´ì„œ ì—°ê²°í•©ë‹ˆë‹¤]]


---

<br />
.center[![container](./imgs/kubernetes-intro/kubernetes-illustrated-guide-diagram-10.png)]

.footnote[.text[ëª¨ë“  ì˜¤ë¸Œì íŠ¸ëŠ” íŠ¹ì • namespaceì•ˆì— ì¡´ì¬í•©ë‹ˆë‹¤]]

---

# Namespace

í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  í´ëŸ¬ìŠ¤í„°ë¥¼ ë…¼ë¦¬ì ì¸ ê°€ìƒ í´ëŸ¬ìŠ¤í„°ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. ë³´í†µ `kube-system`ê³¼ `default`ê°€ ì¡´ì¬í•˜ë©° í”Œë«í¼ì— ë”°ë¼ `docker`ì™€ ê°™ì€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.

`kubectl`ì„ ì´ìš©í•˜ì—¬ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” `default`ë¡œ ì„¤ì •ë˜ê³  ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì ‘ê·¼í•˜ë ¤ë©´ `--all-namespaces` ë˜ëŠ” `-n xxx`ì™€ ê°™ì€ ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.

---

# Name

ëª¨ì˜¤ì˜¤ë“  ì˜¤ë¸Œì íŠ¸ëŠ” ìœ ì¼í•œ ì´ë¦„ì„ ê°€ì§‘ë‹ˆë‹¤. `whoami`ë¼ëŠ” ì´ë¦„ì˜ `ReplicaSet`ì€ `rs/whoami`ì™€ ê°™ì€ ìœ ì¼í•œ ì´ë¦„ì„ ê°€ì§€ê³  `whoami`ë¼ëŠ” ì´ë¦„ì˜ `Service`ëŠ” `svc/whoami`ë¼ëŠ” ìœ ì¼í•œ ì´ë¦„ì„ ê°€ì§‘ë‹ˆë‹¤.

ë³´í†µ ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ê²½ìš°ëŠ” `rs/whoami-75f8bb4779` ì²˜ëŸ¼ ë’¤ì— ë¶ˆê·œì¹™í•œ ë¬¸ìê°€ ë¶™ìŠµë‹ˆë‹¤.

---

# Label

ë¼ë²¨ì€ key-valueë¡œ êµ¬ì„±í•˜ê³  ì—¬ëŸ¬ê°€ì§€ ì˜¤ë¸Œì íŠ¸ë¥¼ ì˜ë¯¸ìˆê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

.center[![label](./imgs/kubernetes-intro/kubernetes-labels-monitoring.png)]

---

# Annotation

í•´ë‹¹ ê°ì²´ì— ì–´ë– í•œ ë‚´ìš©ë„ ì¶”ê°€í•  ìˆ˜ ìˆì§€ë§Œ APIì˜ ì„¤ì •ê°’ìœ¼ë¡œ í™œìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.

```yaml
  # ingress configuration sample
  annotations:
     ingress.kubernetes.io/ssl-redirect: "false"
```

---

# Pod

ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê°€ì¥ ì‘ì€ ë°°í¬ ë‹¨ìœ„ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ íŒŸì€ ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì§ˆìˆ˜ ìˆì§€ë§Œ ëŒ€ë¶€ë¶„ í•œê°œ ë˜ëŠ” ë‘ê°œì…ë‹ˆë‹¤.
íŒŸ ë‚´ë¶€ì—ì„œ ì»¨í…Œì´ë„ˆëŠ” ë„¤íŠ¸ì›Œí¬(ì„œë¡œ localhostë¡œ í†µì‹ ê°€ëŠ¥)ì™€ ë³¼ë¥¨ì„ ê³µìœ í•˜ê³  íŒŸ ìì²´ëŠ” ê³ ìœ í•œ IPë¥¼ ê°€ì§‘ë‹ˆë‹¤.

íŒŸì„ ì§ì ‘ ìƒì„±í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ê³  ìƒìœ„ ê°œë…ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì˜í•´ ìƒì„±ë©ë‹ˆë‹¤.

---

# Controller / ReplicaSet

íŒŸì„ ì—¬ëŸ¬ê°œ ë³µì œí•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. ì˜ˆì „ì—ëŠ” Replication Controllerë¥¼ ì´ìš©í•´ì„œ ê´€ë¦¬í–ˆëŠ”ë° ì´ì œëŠ” ReplicaSetìœ¼ë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤.
ì•„ì§ ì™„ì „íˆ ëŒ€ì²´ëœê±´ ì•„ë‹ˆê³  Replication Controllerì™€ì˜ ì°¨ì´ì ì€ ë‹¨ì§€ íŒŸì˜ Labelì„ ì²´í¬í•˜ëŠ” ì„¤ì •ì´ ì¢€ë” ìì„¸í•´ì¡ŒìŠµë‹ˆë‹¤.

---

# Controller / Deployment

ë°°í¬ì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ì„¤ì •ì„ ê°€ì§€ê³  ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ì…ë‹ˆë‹¤. Deploymentê°€ ì§ì ‘ íŒŸì„ ìƒì„±í•˜ì§€ ì•Šê³  ReplicaSetì„ ì´ìš©í•©ë‹ˆë‹¤.

ìµœì´ˆì— v1 5ê°œë¥¼ ìƒì„±í•˜ë©´ ReplicaSet 5ê°œ ì„¤ì •í•˜ê³ , v2ë¡œ ì—…ë°ì´íŠ¸ í•˜ë¼ê³  í•˜ë©´ v1ìš© ReplicaSetì„ 4ê°œ, v2ìš© ReplicaSetì„ 1ê°œë¥¼ ë§Œë“œëŠ” ì‹ìœ¼ë¡œ ë°°í¬ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

---

# Controller / StatefulSet

íŒŸì„ ë§Œë“¤ë•Œ ë¶ˆê·œì¹™í•œ ë¬¸ìë¡œ ì´ë¦„ì„ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 0ë¶€í„° ìˆœì„œë¥¼ ë¶™ì—¬ì¤ë‹ˆë‹¤. íŒŸì„ ìˆœì„œëŒ€ë¡œ ìƒì„±í•˜ê±°ë‚˜ ìˆœë²ˆì— ë”°ë¼ ê´€ë¦¬ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

# Controller / DaemonSet

ëª¨ë“  ë…¸ë“œì— íŒŸì„ ìƒì„±í• ë•Œ ì‚¬ìš©í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. ë³´í†µ ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ íŒŸì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

# Controller / Job

í•œë²ˆ ì‹¤í–‰í•˜ê³  ì¢…ë£Œë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ì…ë‹ˆë‹¤. ë³´í†µ ì»¨í…Œì´ë„ˆì˜ ìƒíƒœê°€ ì¢…ë£Œë˜ë©´ ë‹¤ì‹œ ì‚´ë¦¬ë ¤ê³  í•˜ì§€ë§Œ Jobì€ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ëŠ”ì§€ ì²´í¬í•©ë‹ˆë‹¤.

---

# Controller / Cronjob

íŠ¹ì • ì£¼ê¸°ë¡œ ì‹¤í–‰í•˜ê³  ì¢…ë£Œë˜ëŠ” Jobì„ ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ì…ë‹ˆë‹¤.

---

# Service / ClusterIP

íŒŸì€ ìì²´ IPë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. íŒŸì€ ì–¸ì œë“ ì§€ ì£½ì„ ìˆ˜ ìˆê³  ë‹¤ë¥¸ ë…¸ë“œë¡œ ì´ë™í•  ìˆ˜ ìˆê³  í™•ì¥ë˜ê±°ë‚˜ ì¶•ì†Œë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
íŒŸì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ IP, PORTë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ClusterIPëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë³´í†µ Deploymentì— í• ë‹¹í•˜ê³  ì„œë¡œ ë‹¤ë¥¸ Deploymentë‚˜ StatefulSetê³¼ í†µì‹ ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

ë‚´ë¶€ì ìœ¼ë¡œ `endpoint` ì˜¤ë¸Œì íŠ¸ë¡œ IP ë¦¬ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ì—¬ëŸ¬ê°œ ë³µì œëœ íŒŸì— ì„œë¹„ìŠ¤ë¥¼ ì—°ê²°í•˜ë©´ ì—¬ëŸ¬ê°œì˜ íŒŸ IPë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

---

# Service / NodePort

ClusterIPëŠ” ë‚´ë¶€ í†µì‹ ìš©ì´ê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ë ¤ë©´ ê° ë…¸ë“œì— ì™¸ë¶€ì—ì„œ ì ‘ì†í•  ìˆ˜ ìˆëŠ” í¬íŠ¸ë¥¼ ì˜¤í”ˆí•´ì•¼ í•©ë‹ˆë‹¤.
NodePortëŠ” ê° ë…¸ë“œì— í¬íŠ¸ë¥¼ ì˜¤í”ˆí•˜ê³  ë“¤ì–´ì˜¨ ìš”ì²­ì„ ë‚´ë¶€ì˜ ClusterIPë¡œ ì—°ê²°í•©ë‹ˆë‹¤.

NodePortë¥¼ ë§Œë“¤ë©´ ClusterIPê°€ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.

---

# Service / Loadbalance

í´ë¼ìš°ë“œ ì „ìš©ìœ¼ë¡œ NodePortë¥¼ ì™¸ë¶€ì— ì—°ê²°ëœ LoadBalancerì™€ ì—°ê²°í•©ë‹ˆë‹¤. AWSì˜ ELBì™€ ì—°ê²°í•œë‹¤ê³  ì´í•´í•˜ë©´ ë©ë‹ˆë‹¤.

`LoadBalance` > `NodePort` > `ClusterIP` ìˆœìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.

---

# Service / Ingress

ë³´í†µ ëª¨ë“  ë…¸ë“œì— 80/443í¬íŠ¸ë¡œ ì˜¤í”ˆí•˜ì—¬ ë„ë©”ì¸ ë˜ëŠ” Pathì— ë”°ë¼ ë‚´ë¶€ ClusterIPì™€ ì—°ê²°í•©ë‹ˆë‹¤.
ê¸°ë³¸ ë‚´ì¥ë˜ì–´ ìˆì§€ ì•Šê³  ìƒí™©ì— ë”°ë¼ Ingress Controllerë¥¼ íŒŸìœ¼ë¡œ ë°°í¬í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ìœ ì—°í•œ êµ¬ì¡°ë¡œ ì„¤ê³„ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ `nginx ingress`ì™€ `gce ingress`ê°€ ìˆìŠµë‹ˆë‹¤.

---

# Storage

ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë³¼ë¥¨ì„ ì§€ì›í•©ë‹ˆë‹¤. ê¸°ë³¸ì ì¸ `Volume` Typeì™¸ì— `PersistentVolume` Typeì„ ì§€ì›í•©ë‹ˆë‹¤.

ìŠ¤í† ë¦¬ì§€ë¥¼ ë§ˆì¹˜ CPUë‚˜ ë©”ëª¨ë¦¬ ìì›ì²˜ëŸ¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ë“±ì¥í•œ `PersistentVolume`ì€ ì„ ì–¸í•´ ë‘ë©´ í•„ìš”í•œ íŒŸì—ì„œ ê°€ì ¸ë‹¤ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
ê´€ë¦¬ìê°€ ì—¬ëŸ¬ê°œì˜ ë³¼ë¥¨ì„ ë¯¸ë¦¬ ìƒì„±í•´ë‘ë©´ íŒŸì—ì„œ ë³¼ë¥¨ì„ ìš”ì²­í•  ë•Œ ì¡°ê±´(ìš©ëŸ‰/ë¼ë²¨)ì— ë§ëŠ” ë³¼ë¥¨ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. `ReadWriteOnce`, `ReadOnlyMany`, `ReadWriteMany` ì ‘ê·¼ ëª¨ë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

`PersistentVolumeClaims`ì€ ê´€ë¦¬ìê°€ ë¯¸ë¦¬ ë³¼ë¥¨ì„ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼ íŒŸì„ ìƒì„±í•  ë•Œ ë™ì ìœ¼ë¡œ ë³¼ë¥¨ì„ ë§Œë“œëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ê·¸ë•Œê·¸ë•Œ EBSë¥¼ ë§Œë“ ë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.

---

# ConfigMap / Secret

ê³µê°œë˜ë„ ê´œì°®ì€ ì„¤ì •ì •ë³´ëŠ” ConfigMapì— ê´€ë¦¬í•˜ê³  ì•”í˜¸í™” í•˜ì—¬ ì €ì¥í•  ì •ë³´ëŠ” Secretì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤. íŒŸì—ì„œëŠ” í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” íŒŒì¼ë¡œ ë°”ì¸ë”©í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
layout: true
class: center, middle
---

# ë‹¨ì 

---
template: default
layout: true
class: default-layout

ch: Kubernetes Disadvantages

---

# ë³µì¡í•œ ê°œë…

ê³µë¶€í• ê²Œ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ êµ¬ì„±í•˜ê³  ê´€ë¦¬í•˜ë ¤ë©´ ì•Œì•„ì•¼ í•  ë‚´ìš©ì´ ë§ê¸° ë•Œë¬¸ì— ë³µì¡í•œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ë©´ ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í° ìƒí™©ì€ ì•„ë‹Œì§€ ê³ ë¯¼í•´ë´ì•¼ í•©ë‹ˆë‹¤.

---

# ë³µì¡í•œ ì„¤ì¹˜

ì„¤ì¹˜ê°€ ë„ˆë¬´ ì–´ë µìŠµë‹ˆë‹¤. í´ë¼ìš°ë“œë¥¼ ì´ìš©í•©ì‹œë‹¤.

í•œë•€í•œë•€ ì„¤ì¹˜í•´ë³´ë©´ì„œ ì œëŒ€ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ìµíˆê³  ì‹¶ì€ë¶„ì€ [ì—¬ê¸°](https://github.com/kelseyhightower/kubernetes-the-hard-way)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”!

---

# ë¬´ê±°ìš´ í™˜ê²½

ê¸°ë³¸ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œê·¸ë¨ì´ ë§ê³  ê·¸ì— ë”°ë¼ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ì´ ë§ì€ í¸ì…ë‹ˆë‹¤.

---

# ë³µì¡í•œ ì„¤ì •íŒŒì¼

ëª¨ë“  ì„¤ì •ì´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìŠ¤ëŸ½ê²Œ ë‚˜ë‰˜ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— ê¸¸ê³  ë³µì¡í•©ë‹ˆë‹¤. swarm ì„¤ì •ê³¼ ë¹„êµí•´ë´…ì‹œë‹¤.

**docker swarm**

```yaml
version: "3"
services:
  api:
    image: vfarcic/go-demo-2
    environment:
      - DB=db
    ports:
      - 8080
    deploy:
      replicas: 3
  db:
    image: mongo:3.3
```

---

== kubernetes config file(ë’¤ì— ì§¤ë¦¼..) ğŸ˜±

.center[![config](./imgs/kubernetes-intro/kubernetes-config.png)]

---
layout: true
class: center, middle
---

# Study

---
template: default
layout: true
class: default-layout

ch: Kubernetes Study

---

# ê°œë°œí™˜ê²½

- **minikube** ê°€ì¥ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°œë°œí™˜ê²½ / ë‹¨ IPì™€ ë³¼ë¥¨ ë§ˆìš´íŠ¸ì— ëŒ€í•œ ì„¤ì •ì´ í•„ìš”í•¨
- **docker for mac/windows** edgeë²„ì „ì— ë‚´ì¥ë˜ì–´ minikubeì²˜ëŸ¼ ì‰½ê²Œ ì‚¬ìš© ê°€ëŠ¥ / IPëŠ” localhostë¡œ ë³¼ë¥¨ì€ í˜¸ìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì—°ê²°í•  ìˆ˜ ìˆìŒ
- **tectonic** CoreOSì—ì„œ ë§Œë“  í”Œë«í¼ìœ¼ë¡œ 10ëŒ€ ì´í•˜ëŠ” ë¬´ë£Œ / ì„¤ì¹˜ì‰¬ì›€
- **vagrant** Kubernetes clusterë¥¼ êµ¬ì„±í•œ vagrant ì‚¬ìš©

---

# docker for mac/windows

ì‰½ê³  ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ docker for mac ë˜ëŠ” windowsì— ë‚´ì¥ëœ kubernetesë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¨ì ì€ kubernetes ë²„ì „ì„ ì •í•  ìˆ˜ ì—†ê³  ì„¸ë¶€ì ì¸ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

.center[![docker for mac](./imgs/kubernetes-intro/docker-for-mac.png)]

---

ì‹¤ì œ ì„¤ì •ì„ ë³´ê³  ì‹¶ë‹¤ë©´ docker for macì˜ ê°€ìƒí™˜ê²½ìœ¼ë¡œ ë“¤ì–´ê°€ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```sh
$ docker run --rm -it --privileged --pid=host walkerlee/nsenter -t 1 -m -u -i -n sh

# ps -ef | grep kube-apiserver
27477 root      73:06 kube-apiserver --admission-control=PodPreset,Initializers,NamespaceLifecycle,
LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,DefaultTolerationSeconds,NodeR
estriction,ResourceQuota --runtime-config=api/all,admissionregistration.k8s.io/v1alpha1 --insecure-
port=0 --client-ca-file=/etc/kubernetes/pki/ca.crt --requestheader-client-ca-file=/etc/kubernetes/p
ki/front-proxy-ca.crt --allow-privileged=true --secure-port=6443 --proxy-client-key-file=/etc/kuber
netes/pki/front-proxy-client.key --enable-bootstrap-token-auth=true --tls-private-key-file=/etc/kub
ernetes/pki/apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --reques
theader-allowed-names=front-proxy-client --advertise-address=192.168.65.3 --service-cluster-ip-rang
e=10.96.0.0/12 --service-account-key-file=/etc/kubernetes/pki/sa.pub --tls-cert-file=/etc/kubernete
s/pki/apiserver.crt --kubelet-client-certificate=/etc/kubernetes/pki/apiserver-kubelet-client.crt -
-proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt --requestheader-username-headers
=X-Remote-User --requestheader-group-headers=X-Remote-Group --requestheader-extra-headers-prefix=X-
Remote-Extra- --kubelet-client-key=/etc/kubernetes/pki/apiserver-kubelet-client.key --authorization
-mode=Node,RBAC --etcd-servers=http://127.0.0.1:2379
```

---

# kubectl context

ë‹¤ì–‘í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ contextë¥¼ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.

```sh
â¯ kubectl config get-contexts
CURRENT   NAME                 CLUSTER                      AUTHINFO             NAMESPACE
          docker-for-desktop   docker-for-desktop-cluster   docker-for-desktop
*         tectonic             vagrant                      tectonic-oidc

â¯ kubectl config use-context docker-for-desktop
Switched to context "docker-for-desktop".

â¯ kubectl config current-context
docker-for-desktop
```

---

layout: false
class: center, middle

# Thanks ğŸ™
    </textarea>
    <script src="./js/remark.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        ratio: '4:3'
      });
    </script>
  </body>
</html>
