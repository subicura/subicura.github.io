<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Go언어로 오픈소스 배송조회 서비스 만들기</title>
  <meta name="description" content="홈쇼핑처럼에서 세번째로 런칭한 돈까스를 구매해 주시는 분들을 보면서 *아.. 받은 만큼 나도 뭔가 베풀어야겠구나* 라는 생각에 배송조회 서비스를 오픈소스로 공개하는 과정을 정리해봅니다. github이라는 소셜코딩 플랫폼이 등장하면서 오픈소스에 참여할 수 있는 장벽이 많이 낮아졌습니다. 사용하던 오픈소스에서 버그를 발견하면 이슈를 살펴보고 수정한 소스를..." />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@subicura" />
    <meta name="twitter:title" content="Go언어로 오픈소스 배송조회 서비스 만들기" />
    <meta name="twitter:image" content="https://subicura.com/assets/images/df_logo.png" />
    
    <meta name="twitter:description"  content="홈쇼핑처럼에서 세번째로 런칭한 돈까스를 구매해 주시는 분들을 보면서 *아.. 받은 만큼 나도 뭔가 베풀어야겠구나* 라는 생각에 배송조회 서비스를 오픈소스로 공개하는 과정을 정리해봅니다. github이라는 소셜코딩 플랫폼이 등장하면서 오픈소스에 참여할 수 있는 장벽이 많이 낮아졌습니다. 사용하던 오픈소스에서 버그를 발견하면 이슈를 살펴보고 수정한 소스를..." />
    
  
  
  <meta property="og:site_name" content="Subicura's Blog" />
  <meta property="og:title" content="Go언어로 오픈소스 배송조회 서비스 만들기"/>
  
  <meta property="og:description" content="홈쇼핑처럼에서 세번째로 런칭한 돈까스를 구매해 주시는 분들을 보면서 *아.. 받은 만큼 나도 뭔가 베풀어야겠구나* 라는 생각에 배송조회 서비스를 오픈소스로 공개하는 과정을 정리해봅니다. github이라는 소셜코딩 플랫폼이 등장하면서 오픈소스에 참여할 수 있는 장벽이 많이 낮아졌습니다. 사용하던 오픈소스에서 버그를 발견하면 이슈를 살펴보고 수정한 소스를..." />
  
  <meta property="og:image" content="https://subicura.com/assets/images/df_logo.png" />
  <meta property="og:url" content="https://subicura.com/2016/06/13/start-go-shipment-tracking-opensource.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2016-06-13T00:00:00+09:00">

  <meta property="fb:app_id" content="1611862309129685" />

  <meta name="naver-site-verification" content="cc257cc7988ed85c9db6c228330b4870f9dfa25f" />

  <link rel="canonical" href="https://subicura.com/2016/06/13/start-go-shipment-tracking-opensource.html"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i" />
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />

  <link rel="stylesheet" type="text/css" href="/css/main.css?1488726763764217000" />
  <link rel="stylesheet" type="text/css" href="/css/asciinema-player.css" />
  <!-- <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />-->
  
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
  <script type="text/javascript">
    WebFont.load({
      custom: {
        families: ['Spoqa Han Sans'],
        urls: ['/css/spoqa-han-sans-font.css']
      }
    });
  </script>

  <script>
    var _mailChimpUrl = "http://eepurl.com/cywDtP";
  </script>
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43194822-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v2.6&appId=1611862309129685";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<a href="https://subicura.com" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/df_logo.png)"></span></a>

<script>
window['_fs_debug'] = false;
window['_fs_host'] = 'www.fullstory.com';
window['_fs_org'] = '3DZV4';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m && m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'); return;}
    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[`;`]*`[`;`]*`[`;`]*`')){
    d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+
    ';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};
})(window,document,window['_fs_namespace'],'script','user');
</script>
<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">
              Go언어로 오픈소스 배송조회 서비스 만들기
              
            </h1>
            <div class="cf post-meta-text">
              <section class="share pull-right">
                <div class="fb-like" data-href="https://subicura.com/2016/06/13/start-go-shipment-tracking-opensource.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
                
                  
                    <a class="icon-twitter" href="http://twitter.com/share?text=Go%EC%96%B8%EC%96%B4%EB%A1%9C+%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4+%EB%B0%B0%EC%86%A1%EC%A1%B0%ED%9A%8C+%EC%84%9C%EB%B9%84%EC%8A%A4+%EB%A7%8C%EB%93%A4%EA%B8%B0&amp;url=https://subicura.com/2016/06/13/start-go-shipment-tracking-opensource"
                      onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                    <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                    </a>
                  
                
                  
                
              </section>
              
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2016-06-13T00:00:00+09:00">13 Jun 2016</time>
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p><img src="https://subicura.com/assets/article_images/2016-06-13-start-go-shipment-tracking-opensource/yongman-pork.jpg" alt="돈까스먹는용만이x칠리등심돈까스" /></p>

<p><a href="https://www.likehs.com">홈쇼핑처럼</a>에서 세번째로 런칭한 <a href="https://www.likehs.com/tvprogram/index/view/id/24/">돈까스</a>를 구매해 주시는 분들을 보면서 <em>아.. 받은 만큼 나도 뭔가 베풀어야겠구나</em> 라는 생각에 배송조회 서비스를 오픈소스로 공개하는 과정을 정리해봅니다.</p>

<p><a href="https://github.com/">github</a>이라는 소셜코딩 플랫폼이 등장하면서 오픈소스에 참여할 수 있는 장벽이 많이 낮아졌습니다. 사용하던 오픈소스에서 버그를 발견하면 이슈를 살펴보고 수정한 소스를 슬쩍 풀 리퀘스트 하면 됩니다. 내가 작성한 소스가 커미터 마음에 들면 머지가 될 것이고 그렇게 우리는 오픈소스 컨트리뷰터가 되고 인류에 조금이라도 공헌한 사람이 됩니다.</p>

<p>이러한 활동은 실력도 늘고 이력도 쌓고 재미도 느낄수 있습니다.</p>

<p>이제 컨트리뷰터는 해봤으니 커미터가 되어봅시다. 아쉽게도 인기있는 오픈소스의 커미터는 꽤 많은 노력이 필요하고 고오급 개발자만 가능한 것 같습니다.
그럼 오픈소스 프로젝트를 직접 운영해보는건 어떨까요? 직접 오픈소스 프로젝트를 운영하면 커미터가 될 수 있고 리뷰어도 될 수 있고 프로젝트를 운영하면서 많은 노하우를 배울수도 있습니다. 아참, 오픈소스에 참여하면 IntelliJ IDE도 <a href="https://www.jetbrains.com/buy/opensource/">무료</a>로 사용할 수 있고 JIRA도 <a href="https://ko.atlassian.com/software/views/open-source-license-request">무료</a>로 쓸 수 있습니다.</p>

<h2 id="section">어떤걸 만들까?</h2>

<p>커머스에서 상품이 배송되면 배송상태를 추적해야합니다. 배송이 완료되면 구매확정 버튼을 누르게 할수도 있고, 배송정보 화면을 커스터마이징 할 수도 있습니다. 많은 배송업체가 API를 제공하지 않기 때문에 자동화하기가 까다롭습니다.(대체 다른 서비스들은 어떻게 추적하는거지…?) 그래서 결국 HTML을 파싱하는 방법을 선택합니다. 택배사와 송장번호를 입력하면 택배 사이트에 접속하여 HTML을 읽고 DOM을 파싱하여 정리된 포멧으로 택배정보를 조회하는 서비스를 만듭니다</p>

<p>혹시 누가 만들어 놓지 않았을까 검색을 해보니 무료에 오픈소스로 공개된 건 없는것 같습니다. 질문글도 많고 원하는 사람도 있는거 같으니 오픈소스로 하기 딱인 프로젝트인것 같습니다. 아무도 안쓰는 기능을 만들면 힘들게 오픈해도 반응이 없어서 슬픔 ㅠ</p>

<h2 id="go-">왜 서비스를 따로 분리하여 오픈소스에 Go로 만드는가?</h2>

<p>배송조회 서비스는 기존 웹서비스에 하나의 액션으로 구현하는게 아니라 완전히 독립적으로 구현합니다. 몇가지 검토끝에 오픈소스로 공개하기로 하였고 가벼운 프로젝트라 Go언어로 구현합니다.</p>

<p><strong>왜 <a href="http://martinfowler.com/articles/microservices.html">마이크로서비스</a>인가?</strong></p>

<p><img src="https://subicura.com/assets/article_images/2016-06-13-start-go-shipment-tracking-opensource/monolith-microservice.png" alt="monoliths / microservices" /></p>

<p>마이크로서비스와 비교되는 방식으로 모놀리식이라는 서비스 개발 방법이 있습니다.</p>

<ul>
  <li>다양한 기능을 하는 하나의 큰 프로그램을 만드는 것 (우리가 잘알고 있고 매우 전통적인 개발스타일)</li>
  <li>하나의 웹서버를 띄우면 회원가입도 되고 정보조회도 되고 메일도 보낼 수 있고 푸시도 보낼 수 있고 통계도 보고 안되는게 없음</li>
  <li>하나의 작은 기능을 수정해도 전체를 재배포해야하고 특정 기능에 트래픽이 몰려도 전체 서비스를 여러개 띄워야함</li>
  <li>코드가 커질수록 유지보수가 어려워짐</li>
  <li>새로운걸 추가하고 싶은데 기존 로직/데이터에 어떤 문제가 있을지 모름</li>
  <li>기존 기술(버전, 언어, 프레임웍)외에 새로운 기술을 쓰기 어려움</li>
</ul>

<p>그렇다면, 마이크로서비스 방식은 어떤걸까요?</p>

<ul>
  <li>최근 많이 사용되는 마이크로서비스는 기능별로 서비스를 분리하고 독립적으로 동작하게 구성하는 방식</li>
  <li>기존 웹서비스에 영향을 미치지 않고 독립적으로 개발/유지보수가 가능</li>
  <li>서버 확장, 배포, 적절한 기술사용, 조직구성등이 유연해짐</li>
  <li>물론, 관리할게 많아지고 테스트가 어려워지는 단점존재</li>
  <li>쪼개는 범위와 전략은 서비스에 따라 다름. 무조건 잘게 쪼갠다고 좋지 않음</li>
  <li>아.. 우리서비스도 이런식인데? 라는 분은 용어는 처음이라도 이미 마이크로 서비스방식으로 개발하고 있을 확률이 높음</li>
</ul>

<p>배송조회 서비스는 SMS나 Email서비스를 호출하듯이 독립적으로 분리하고 싶었습니다. 별도의 서버로 띄우고 REST API를 요청하여 정보를 가져오는 방식으로 구성합니다. 분리되서 좋고 나중에 다른 서비스에서 사용할 수도 있을겁니다.</p>

<p><strong>왜 오픈소스 인가</strong></p>

<p>처음 얘기한 개발자 스스로에게 도움이 되는 장점외에 배송조회의 특성상 오픈소스가 어울린다고 생각합니다.</p>

<ul>
  <li>택배사가 너무 많음. 우리나라만 20개정도에 외국까지 포함하면 100개가 넘음 &gt; 혼자 모든 택배사의 배송정보를 구현할 순 없지만, 각자 필요한 사람들이 구현한다면?!</li>
  <li>공식 API가 아닌 비공식적인 방법이라 언제 막힐지 모름 &gt; 누군가 수정사항을 발견하고 개선해 나간다면?!</li>
  <li>우체국 택배만 필요한 사람도 있을거고 CJ대한통운만 필요한 사람이 있듯이 각자의 필요에 따라 조금씩 수정 보완하여 개발하면 서로 윈윈!</li>
</ul>

<p><strong>왜 <a href="https://golang.org/">Go</a>인가</strong></p>

<p><img src="https://subicura.com/assets/article_images/2016-06-13-start-go-shipment-tracking-opensource/languages.png" alt="languages" /></p>

<ul>
  <li>구글이 개발한 가장 핫한 언어</li>
  <li><a href="https://github.com/golang/go/wiki/GoUsers">Go를 사용중인 회사들</a></li>
  <li><a href="https://eng.uber.com/go-geofence/">uber의 Go언어 사용사례</a>, <a href="http://blog.parse.com/learn/how-we-moved-our-api-from-ruby-to-go-and-saved-our-sanity/">parse의 ruby에서 go로 전환사례</a>(루비야 아프지마.. ㅠ)</li>
  <li>코딩이 재밌고 속도도 괜찮음</li>
  <li>정적언어지만 동적언어의 장점을 많이 가져옴</li>
  <li>빠른 컴파일 빠른 실행</li>
  <li>가비지컬랙션, 메모리 처리 안정성(nil 참조등), methods, interfaces, type assertions, reflection 지원</li>
  <li>VM사용안함. 바로 실행가능한 바이너리 파일로 생성됨</li>
  <li>심플하고 간결한 문법
    <ul>
      <li>클래스가 없고</li>
      <li>상속이 없고</li>
      <li>생성자가 없고</li>
      <li>final이 없고</li>
      <li>exception이 없고</li>
      <li>annotation이 없고</li>
      <li>generic이 없음</li>
    </ul>
  </li>
  <li>쉽고 훌륭한 동시성 처리</li>
  <li>code style을 강제하여 협업과 유지보수에 유리함</li>
  <li>단점으로 검색이 어렵고 (구글에서 go를 입력해보자) 패키지관리 시스템이 npm, gem처럼 안정되지 않음</li>
</ul>

<p>배송조회는 <code class="highlighter-rouge">http요청</code> &gt; <code class="highlighter-rouge">html조회</code> &gt; <code class="highlighter-rouge">parsing</code> &gt; <code class="highlighter-rouge">응답</code>하는 과정을 가진 굉장히 단순한 서비스입니다. 새로운 언어를 적용하고 배우는데 가장 좋은 방법은 프로젝트를 한번 해보는 것이고 굉장히 적절한 사이즈의 프로젝트입니다.</p>

<h2 id="go--1">Go로 개발하기</h2>

<p>Go언어에 대해 설명하는 포스트는 아니지만 Go를 처음 접하는분들을 위해 몇가지 팁을 공유합니다.</p>

<ul>
  <li>공부
    <ul>
      <li><a href="https://tour.golang.org/welcome/1">A Tour of go</a> - golang에서 공식으로 제공하는 방법으로 실습위주의 방법. 지하철 출퇴근때 하기 딱 좋음</li>
      <li>공식문서(<a href="https://golang.org/doc/code.html">How to Write Go Code</a>, <a href="https://golang.org/doc/effective_go.html">Effective Go</a>) - 역시 지하철 출퇴근때 보면 좋음</li>
      <li>책 - 이미 한글로 된 책이 꽤 많이 출간되었고 번역서가 아닌 책도 많아 대부분 내용이 딱딱하지 않고 읽기 좋음(<a href="http://pyrasis.com/go.html">무료공개서적</a>도 있음)</li>
      <li><a href="https://github.com/purpleworks/delibird">배송조회 오픈소스</a> 참여 고고 - 직접 만들어보는게 배우기 가장 좋음</li>
    </ul>
  </li>
  <li>IDE
    <ul>
      <li><a href="https://www.jetbrains.com/idea/">IntelliJ IDEA Community</a> 추천</li>
      <li>무료고 일반적으로 사용하기 쉽고 기능이 강력함</li>
      <li>GO, File watchers plugin 설치 필수</li>
      <li>File watcher는 파일을 저장할때마다 <code class="highlighter-rouge">goimports</code>를 실행하여 코드스타일을 정리함</li>
    </ul>
  </li>
</ul>

<h2 id="section-1">개발</h2>

<p>이제 본격적으로 개발을 해 봅니다. 전체 소스는 <a href="https://github.com/purpleworks/delibird">https://github.com/purpleworks/delibird</a>에 공개되어 있습니다. 상세한 내용은 따로 설명하지 않고 어떤점을 주의하면서 개발하였는지 고민했던 과정을 정리합니다.</p>

<p><strong>웹서버선택</strong></p>

<p>Go는 다른 언어와 마찬가지로 다양한 웹프레임워크/미들웨어 오픈소스가 존재합니다. Ruby는 <a href="http://rubyonrails.org/">Rails</a>가 유명하고 Python은 <a href="https://www.djangoproject.com/">Django</a>가 유명하고 Node는 <a href="http://expressjs.com/">Express</a>가 유명하지만 Go는 대표적인게 없고 아직까지 춘추전국시대입니다. 아마 계속해서 대표적인게 없을수도 있습니다. 이는 Go언어의 특성에 기인을 하는데..</p>

<p>배송조회 서비스에서 선택한 웹서버 미들웨어는 <a href="https://github.com/urfave/negroni">negroni</a>입니다. negroni는 스스로 할 수 있는게 거의 없는 굉장히 라이트한 미들웨어입니다. 라우팅도 다른 라이브러리를 조합해야 하고 응답 렌더링도 여러 라이브러리중에 하나를 선택해야 합니다. 당연히 디비접속관련이나 ORM도 포함하고 있지 않습니다. 하지만 굉장히 유연하게 <strong>조합</strong>할 수 있도록 설계되어 있습니다.</p>

<p>물론, Go언어도 풀프레임워크가 존재합니다. <a href="https://github.com/go-martini/martini">martini</a>(8,521 stars)라던가 <a href="https://github.com/revel/revel">revel</a>(6,895 stars)이 엄청난 인기를 끌고 있습니다. 그런데, negroni는 martini를 개발했던 <a href="https://github.com/codegangsta">codegangsta</a>가 <a href="https://codegangsta.io/blog/2014/05/19/my-thoughts-on-martini/">martini 디자인 설계는 잘못</a>이라고 말하고 개발한 미들웨어입니다. 풀프레임워크는 Go언어에 맞는 디자인 설계가 아니라고 생각한겁니다.</p>

<p>실제로 지금도 다양한 형태의 라우팅 라이브러리가 개발되고 있습니다. 서로 이런기능이 좋고 속도가 좋다고 주장하고 있는데 negroni를 사용하면 이를 적용하기가 굉장히 간단합니다. 이번 프로젝트는 아이디도 간지나고 star 8,000개 프로젝트 따위 맘에 안들면 버릴수도 있고 실력도 고오급인 codegangsta가 주장하는데로 negroni를 선택합니다. 라우팅은 <a href="https://github.com/gorilla/mux">gorilla/mux</a>, 렌더링은 <a href="https://github.com/unrolled/render">unrolled/render</a>를 선택했습니다.</p>

<p><strong>테스트</strong></p>

<p>Go는 특별한 라이브러리를 설치하지 않아도 바로 <code class="highlighter-rouge">xxxx_test.go</code>파일을 작성해서 테스트코드를 작성할 수 있습니다. 하지만 고오급 기능을 위해 <a href="http://goconvey.co/">goconvey</a>를 사용합니다. UI도 이쁘고 코드도 간결합니다. Go언어는 나온지 얼마 되지도 않았는데 이런툴이 있다는게 놀랍..</p>

<p>HTML을 파싱하는게 주임무이기 때문에 테스트코드는 직접 택배사 서버로 HTTP요청을 하지 않고 <a href="https://github.com/jarcoal/httpmock">HTTP mocking</a>을 이용합니다. 목업을 사용하면 매번 실제서버로 요청을 날리지 않아도 되고 택배정보에 있는 개인 프라이버시도 숨길 수 있어 좋습니다. 샘플을 모으는게 관건!</p>

<p><strong>주석</strong></p>

<p>Go는 간단하게 주석을 작성하는걸 추천합니다. 구글이 개발해서 그런지 github에 소스를 공개하면 잽싸게 공식 문서 사이트에 소스와 주석을 추출하여 문서로 등록해버립니다.(ㄷㄷㄷ 크롤링하나?;) 배송조회서비스도 공식사이트(<a href="https://godoc.org/">godoc.org</a>)에서 <a href="https://godoc.org/github.com/purpleworks/delibird">문서</a>를 볼 수 있습니다.</p>

<p><strong>코딩</strong></p>

<p>웹서버과 테스트 방법을 정했으니 본격적으로 코딩을 합니다. HTML DOM을 조회하기 위해 <a href="https://github.com/PuerkitoBio/goquery">goquery</a>를 사용했습니다. jQuery처럼 체이닝메소드를 지원하고 비슷한 API를 제공합니다.</p>

<p>홈쇼핑처럼은 CJ대한통운만 이용하지만 사용자수 1위인 우체국택배도 구현하였습니다. 뭔가 Go 초보티가 많이 나는 소스지만 동작은 합니다. 일단 완성! 버전 0.1.0으로 등록합니다.</p>

<h2 id="section-2">오픈소스로</h2>

<p>어떤 프로젝트를 오픈소스화 한다는건 코딩이외에 추가적인 작업들을 필요로 합니다. 단순히 코드를 정리하고 공개하는것 외에 다른 개발자들의 참여를 유도하고 지속가능한 개발을 하기 위해 소스 품질에 신경을 써야 합니다.</p>

<p>github은 <a href="https://github.com/explore">explore</a>메뉴와 <a href="https://github.com/trending">trending</a>메뉴를 제공합니다. 여기서 인기있는 오픈소스들은 어떤식으로 프로젝트를 구성하고 있는지 참고하면 많은 도움이 됩니다. 몇가지 프로젝트를 참고하여 오픈소스에 필요한 작업들을 해봅니다.</p>

<p><strong>이름/로고만들기</strong></p>

<p>개발자들의 코딩시간 대부분을 잡아먹는다는 이름짓기 시간입니다. <code class="highlighter-rouge">shipment tracking library</code>보다는 뭔가 그럴듯한 이름을 짓는것이 좋습니다. 개인적으로 생명체가 마스코드인것이 성공하는 오픈소스라고 생각되는데 (github의 <a href="https://octodex.github.com/">octocat</a>, golang의 <a href="https://blog.golang.org/gopher">gopher</a>, docker의 <a href="https://blog.docker.com/2013/10/call-me-moby-dock/">moby dock</a>등..) 그에 따라 적당히 동물을 가지고 이름을 지었습니다. 배송이니까 새가 생각났고 delivery와 bird의 조합인 <strong>Delibird</strong>가 탄생하였습니다.</p>

<p>이제 이름을 지었으니 로고를 만듭니다. 직접 그릴순 없으니 심플한 무료 아이콘이 많은 <a href="https://icons8.com/#/ios">icons8.com</a>에서 새 아이콘을 하나 고르고 이쁘장한 색샘플을 모아놓은 <a href="http://flatuicolors.com/">flatuicolors.com</a>에서 보라색계열을 하나 선택합니다. 폰트도 밋밋하지 않게 <a href="https://www.google.com/fonts">구글웹폰트</a>에서 하나 고릅니다.</p>

<p align="center">
<img src="https://subicura.com/assets/article_images/2016-06-13-start-go-shipment-tracking-opensource/delibird.logo.png" alt="Delibird Logo" title="Delibird Logo" />
</p>

<p>짠, 포샵을 쓱싹하여 그럴싸한 이름에 로고가 만들어졌습니다.</p>

<p><strong>문서화</strong></p>

<p>오픈소스 프로젝트는 문서가 중요합니다. 문서에 오픈소스를 소개하고 발전 의지를 잘 표현해야 다른 개발자를 참여하게 만들 수 있고 잘 운영되는 듯한 느낌을 줍니다.</p>

<p>첫번째로 필요한 건 <a href="https://github.com/purpleworks/delibird/blob/master/README.md"><code class="highlighter-rouge">README.md</code></a>파일 입니다. 이 파일은 github 첫화면에 보여지기 때문에 매우 중요합니다. 다음과 같은 항목을 기본으로 넣어줍니다.</p>

<ul>
  <li>기본소개 - 어떤 프로젝트인지 소개</li>
  <li>설치방법 - 바로 사용해볼 수 있도록 설치방법 소개</li>
  <li>사용방법 - 샘플을 포함한 사용방법 소개</li>
  <li>테스트방법 - 전체 테스트를 하는 방법 소개</li>
  <li>기여방법 - 기여에 대한 설명</li>
  <li>라이센스 - 라이센스 소개</li>
</ul>

<p>두번째로 필요한 건 <a href="https://github.com/purpleworks/delibird/blob/master/LICENSE"><code class="highlighter-rouge">LICENSE</code></a>파일입니다. 라이센스는 <a href="http://choosealicense.com/">다양한것들</a>중에 선택할 수 있는데 가장 심플한 MIT 라이센스를 선택합니다.</p>

<p>추가적으로 <a href="https://github.com/purpleworks/delibird/blob/master/CHANGELOG.md"><code class="highlighter-rouge">CHANGELOG.md</code></a>파일등을 추가합니다.</p>

<p><strong>웹페이지</strong></p>

<p>github은 <a href="https://help.github.com/articles/user-organization-and-project-pages/">page</a>라는 기능으로 정적인(html, image, css, js) 페이지를 무료로 만들수 있습니다.</p>

<noscript><pre>$ git checkout --orphan gh-pages
# Creates our branch, without any parents (it&#39;s an orphan!)
Switched to a new branch &#39;gh-pages&#39;

$ git rm -rf .
# Remove all files from the old working tree
rm &#39;.gitignore&#39;</pre></noscript>
<script src="https://gist.github.com/subicura/56599a77c63ea929f413a7ab8052c61e.js"> </script>

<p>프로젝트에 <code class="highlighter-rouge">gh-pages</code>라는 브랜치를 만들고 html파일과 js,css파일등을 넣으면 끝입니다. 인터넷에서 무료 bootstrap landing 테마를 하나 다운받아 쓱싹 만들고 push합니다. github 조직이름이 purpleworks이고 프로젝트명이 delibird라면 <a href="http://purpleworks.github.io/delibird/">purpleworks.github.io/delibird</a>라는 URL로 자동으로 연결됩니다. 이를 통해 README.md로는 부족한 내용을 보여줄 수 있습니다.</p>

<p>여기서는 배송조회 테스트를 해볼수 있으면 좋을것 같아 테스트 폼을 넣었습니다.</p>

<p><strong>Github 외부서비스 연동</strong></p>

<p>github은 다양한 외부 서비스와 연동이 가능합니다. 보통 github 저장소에 소스를 푸시하면 연동된 서비스가 소스를 테스트하고 결과를 알려줍니다. 공개 저장소는 무료로 제공하고 비공개 저장소에 대해서만 과금을 취하는 경우가 일반적입니다.</p>

<p>유용한 서비스를 연동해 놓으면 코드 품질과 테스트 결과를 자동으로 알 수 있어 매우 유용합니다.</p>

<ul>
  <li><a href="https://travis-ci.org">travis-ci</a>
    <ul>
      <li>대표적인 Test and Deploy 서비스</li>
      <li><a href="https://github.com/purpleworks/delibird/blob/master/.travis.yml"><code class="highlighter-rouge">.travis.yml</code></a> 파일을 만들고 빌드 정보 입력</li>
      <li>매 빌드마다 <code class="highlighter-rouge">go test</code>를 수행하고 결과를 알려줌</li>
      <li>매 빌드가 끝나면 커버리지 정보를 coveralls로 전송하게 함</li>
    </ul>
  </li>
  <li><a href="https://coveralls.io/">coveralls</a>
    <ul>
      <li>대표적인 코드 커버리지 서비스</li>
      <li>travis-ci에서 정보를 전달하도록 설정</li>
    </ul>
  </li>
  <li><a href="https://codeclimate.com">codeclimate</a>
    <ul>
      <li>대표적인 코드품질 검사 서비스</li>
      <li>다양한 항목으로 코드를 검사하여 학점처럼 점수를 매겨줌</li>
      <li>Go는 아직 지원 안하는듯하여 다른 서비스 사용</li>
    </ul>
  </li>
  <li><a href="https://goreportcard.com/">goreportcard.com</a>
    <ul>
      <li>Go전용 코드품질 검사 서비스</li>
      <li>go_vet, gocyclo, gofmt, golint, ineffassign, license, misspell등을 돌려 점수를 매겨줌</li>
      <li>다행히 A+! (점수가 후한듯..)</li>
    </ul>
  </li>
</ul>

<p><strong>뱃지</strong></p>

<p><img src="https://subicura.com/assets/article_images/2016-06-13-start-go-shipment-tracking-opensource/github-badge.png" alt="github badge" /></p>

<p>github은 상단에 각종 상태를 뱃지아이콘으로 보여주는 특별한 문화(?)가 있습니다. 라이센스라던가 문서링크, 코드 품질이나 커버리지, 빌드결과(테스트) 여부등이 있습니다. 이외에도 커뮤니티 게시판 링크라던가 채팅링크등 다양한 뱃지가 있습니다. <a href="http://shields.io/">shields.io</a>에서는 다양한 뱃지아이콘을 제공하고 있고 각 서비스마다 자체적으로 뱃지 링크를 제공하기도 합니다.</p>

<ul>
  <li>license
    <ul>
      <li><a href="http://shields.io/">shields.io</a> 라이센스 뱃지 사용</li>
      <li>소스 저장소의 LICENSE파일을 보고 이미지 생성</li>
      <li>https://img.shields.io/github/license/{id}/{project}</li>
    </ul>
  </li>
  <li>godoc
    <ul>
      <li><a href="https://godoc.org/">godoc.org</a> 뱃지 사용</li>
      <li>Go프로젝트는 godoc이 자동으로 생성됨</li>
      <li>https://godoc.org/github.com/{id}/{project}?status.svg</li>
    </ul>
  </li>
  <li>코드품질
    <ul>
      <li><a href="https://goreportcard.com/">goreportcard.com</a> 뱃지 사용</li>
      <li>소스 품질 결과를 A+, B, C등의 뱃지로 생성함</li>
      <li>http://goreportcard.com/badge/{id}/{project}</li>
    </ul>
  </li>
  <li>커버리지
    <ul>
      <li><a href="http://shields.io/">shields.io</a> coveralls 뱃지 사용</li>
      <li>coveralls 결과를 뱃지로 생성함</li>
      <li>http://img.shields.io/coveralls/{id}/{project}.svg</li>
    </ul>
  </li>
  <li>빌드결과
    <ul>
      <li><a href="https://travis-ci.org">travis-ci</a> 뱃지 사용</li>
      <li>https://travis-ci.org/{id}/{project}.svg?branch=master</li>
    </ul>
  </li>
</ul>

<p><strong>heroku</strong></p>

<p><a href="https://www.heroku.com/">heroku</a>는 소스빌드/배포/스케일이 자유로운 클라우드 서비스입니다. 다른 웹호스팅 서비스와 차별점은 소스를 업로드만 하면 알아서 웹서버를 띄워준다는 점입니다. 이게 무슨 말이냐면 Rails, Django, Express등은 고유한 파일 구조가 있습니다. 이러한 디렉토리구조나 파일의 확장자를 보고 <a href="https://devcenter.heroku.com/articles/buildpacks">알아서</a> 서버를 띄운다는 신박한 서비스입니다.</p>

<p align="center">
<img src="https://subicura.com/assets/article_images/2016-06-13-start-go-shipment-tracking-opensource/heroku.png" alt="heroku free plan" title="heroku free plan" />
</p>

<p>더 놀라운건 무료 플렌입니다. 30분간 요청이 없으면 자동으로 서버가 중지되고 그 이후 요청이 들어오면 다시 서버를 시작합니다. 예전에는 시간제한이 없었는데 이제 시간제한이 생겨서 아쉽긴 하지만 테스트로 배송조회 서비스를 켜놓기에는 부족함이 없습니다. heroku에 로그인을 하고 서버를 만든 후 github 소스를 연동하니 바로 서버가 뜹니다. 정말 뜹니다.</p>

<p align="center">
<a href="https://heroku.com/deploy?template=https://github.com/purpleworks/delibird">
<img src="https://www.herokucdn.com/deploy/button.svg" alt="Heroku button" title="Heroku button" />
</a>
</p>

<p>게다가, 누구든 쉽게 오픈소스로 부터 서버를 만들 수 있게 <a href="https://devcenter.heroku.com/articles/heroku-button">heroku button</a> 기능을 제공합니다. 소스폴더에 <a href="https://github.com/purpleworks/delibird/blob/master/app.json"><code class="highlighter-rouge">app.json</code></a> 파일만 만들어 놓으면 됩니다. 저 버튼을 클릭하면 바로 테스트 서버를 띄워볼 수 있습니다. 언제 이렇게 서버 띄우기 쉬운 세상이 되었나요? ㄷㄷ</p>

<p><strong>커뮤니티</strong></p>

<p>오픈소스에서 중요한건 건전하고 활발한 커뮤니티를 만드는 것입니다. 기본적으로 github에서 제공하는 이슈기능을 사용하면 되지만, 포럼이나 IRC, 메일링리스트를 사용하면 더 효과적으로 관리할 수 있습니다. Delibird는 아직 작은 프로젝트이기 때문에 기본적인 이슈기능만 사용합니다.</p>

<p><strong>홍보</strong></p>

<p>오픈소스가 생명을 얻고 발전하려면 홍보가 필수 입니다. 아무리 유용한 프로젝트라고 해도 홍보가 없으면 사람들이 찾을수가 없습니다. 그래서 제가 지금 이렇게 블로그를 통해 홍보를 하고 있는거 아니겠습니까..</p>

<p><a href="https://github.com/purpleworks/delibird">https://github.com/purpleworks/delibird</a>오셔서 star한번씩 눌러주시고 관심갖어 주시면 감사하겠습니다. ㅠㅠ</p>

<h2 id="section-3">그래서</h2>

<p>내부적으로 사용하던 소스를 오픈하기위에 적절히 리팩토링을 하고 문서를 추가하여 <a href="https://github.com/purpleworks/delibird">https://github.com/purpleworks/delibird</a>에 공개하였습니다. Go에 관심있으신분이나 배송조회에 관심있으신분은 별 눌러주시고 참여해주세요. 열려있습니다!</p>

<p>많은 사람들이 오픈소스에 참여하고 오픈소스 프로젝트를 하고 있습니다. 하지만, 어떻게 만드는지에 대해서는 정리된 글이 잘 없는 것 같아 포스트를 작성하였습니다.</p>

<p>사실, 널리 사랑받는 프로젝트는 위에 나열한 겉치례(?)보다는 얼마나 유용하고 얼마나 잘 설계되어 얼마나 자아알 짜여졌는지가 중요합니다. 최신 트렌드를 아는것과 잘 개발하는 것이 정비례하지는 않지만 여러가지 최신 트렌드를 알면 지금보다 조금 더 나은 개발자가 되는데는 도움이 된다고 생각합니다.</p>

<p>그리고 중요한점은 오픈소스는 생각보다 시간과 노력이 많이 필요한 작업이라는 점입니다. 지금 몇가지 공개 저장소를 관리하고 있는데 여간 손이 많이 가는게 아닙니다. 이슈가 올라오면 체크하고 확인하고 수정하고 버전업하고 npm이나 bower에 등록하고.. 겨우 star수 200개도 이정도인데 다른 프로젝트들은 상상도 못할 것 같습니다. 오픈소스 커미터분들에게 감사드립니다.</p>

<p>배송조회 서비스를 만든 홈쇼핑처럼에서 지난번 고기덮밥에 이어 돈까스 메뉴도 추가되었으니 서비스에 관심있으신분은 <a href="https://www.likehs.com/">https://www.likehs.com/</a> 에 방문해 주시구요.
개발자 상시 모집중입니다. 연락주세요 ㅎㅎ (<a href="http://www.purpleworks.co.kr/recruit">http://www.purpleworks.co.kr/recruit</a>)</p>

          <p class="tags">
            
              <a href="/tags#backend-ref">BackEnd</a>
            
              <a href="/tags#go-ref">Go</a>
            
              <a href="/tags#opensource-ref">OpenSource</a>
            
          </p>
        </section>
        <footer class="post-footer">
          <section class="share">
            <div class="fb-like" data-href="https://subicura.com/2016/06/13/start-go-shipment-tracking-opensource.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Go%EC%96%B8%EC%96%B4%EB%A1%9C+%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4+%EB%B0%B0%EC%86%A1%EC%A1%B0%ED%9A%8C+%EC%84%9C%EB%B9%84%EC%8A%A4+%EB%A7%8C%EB%93%A4%EA%B8%B0&amp;url=https://subicura.com/2016/06/13/start-go-shipment-tracking-opensource"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>subicura</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2016-06-13 00:00">13 Jun 2016</time></p>
            </section>
          </div>

          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> RSS 구독하기</span></a><br />
               
                <a class="subscribe" href="http://eepurl.com/cywDtP" target="_blank"> <span class="tooltip"> <i class="fa fa-rss"></i> Email 구독하기</span></a>
              
            </footer>
          </div>
        </div>

         
        <div class="fb-comments-wrapper">
           
            <div class="fb-comments" data-href="http://subicura.com/2016/06/13/start-go-shipment-tracking-opensource.html" data-num-posts="5" data-order-by="social" data-width="100%"></div>
          
        </div>
        

        
      </article>
    </main>

    <aside class="read-next">
      
        <a class="read-next-story no-cover" href="/2016/06/20/server-side-rendering-with-react.html">
          <section class="post">
            <h2>왜 React와 서버 사이드 렌더링인가?</h2>
            <p>홈쇼핑처럼 4번째 상품인 튀김을 기름에 튀기면서 React를 적용하느라 고생했던 순간이 떠올라 React와 서버 사이드 렌더링...</p>
          </section>
        </a>
      
      
        <a class="read-next-story prev no-cover" href="/2016/06/07/zero-downtime-docker-deployment.html">
          <section class="post">
            <h2>도커를 이용한 웹서비스 무중단 배포하기</h2>
            <p>홈쇼핑처럼x밀본고기덮밥이 팔리는걸 관리자화면에서 보면서 하루에도 여러번 소스를 업데이트 하고 운영서버로 배포했던 내용이 떠올라 후기로 정리합니다....</p>
          </section>
        </a>
      
    </aside>
    <footer class="post-site-footer clearfix">
      <section class="copyright"><a href="/">Subicura's Blog</a> © 2017</section>
    </footer>

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js?1488726763764217000"></script>
<script type="text/javascript" src="/assets/js/readingtime.js"></script>
<script type="text/javascript" src="/assets/js/asciinema-player.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');

      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>

  </body>
</html>
